# vault-disaster-recovery
هفته گذشته به دلیل رخ دادن یک دیزستر سرویس های Kubernetes  دچار اختلال در سرویس دهی شدن. بعد از بررسی اولیه همه دسترسی ها به دلیل از کار افتادن NSX  و مسدود بودن ترافیک East-West، تا مدتی به هیچ ابزاری برای چک  کردن وضعیت کلاستر دسترسی نداشتیم. بعد از چند دقیقه تونستیم به لاگ سرویس ها توی ELK  برسیم و دلیل برگشت 504 , 400 Request  هارو متوجه شدیم. بله سرویس Vault  بعد از ری استارت شدن Seal  شده بود و باید Unseal  میشد. سرویس Vault  تقریبا میشه گفت قلب تپنده سرویس های یک کلاستر کوبرنتیس هست چرا که تمام اطلاعات حساس سرویس ها داخل اون ذخیر میشه. این سرویس بعد از پیاده سازی 5 عدد Unseal Key برای زمانی که بخوایم اون رو از حالت Seal  خارج کنیم و یک Token  برای لاگین داخل سرویس در اختیارمون قرار میده. بعد از اینکه متوجه شدیم مشکل از کجاست و همه سرویس ها معطل این سرویس بودن شروع به ترابلشوت مشکل کردیم. خب لازم بود تو مرحله اولبه پاد های این سرویس لاگین کنیم و با استفاده از کلید هایی که در اختیار داشتیم، سرویس رو Unseal  کنیم. خب ابتدا لازم بود داخل پاد لاگین
